<!DOCTYPE html>
<html>
<head>
    <title>
        attributeRelease
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="robots" content="noindex, nofollow" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <script type="text/javascript" src="/mustache.min.js"></script>
	<script type="text/javascript" src="/dsar5.js"></script>
    <link type="text/css" rel="stylesheet" href="/wayf_new.css" media="all" />
    <style>
    	div,
    	        p { margin: 1em 0; }
    	div.r { text-align: right !important; }
    	.prevattrs > ul { list-style: inherit; }
    	.prevattrs ul.rm { list-style: none; }

    	span.rm
    	{
    		content: 'X';
    		color: orange;
    	}

    	.prevattrs ul.rm li::before
    	{
    		content: 'X';
    		color: orange;
    		display: inline-block;
    		width: 1em;
    		margin-left: -1em;
    	}

    	@media only screen and (max-width: 800px)
    	{
    		span.input { display: block; }
    	}
</style>
</head>

<body>
    <div id="header">
        <a id="wayflogo" href="http://www.wayf.dk" title="WAYF homepage" target="_blank">
        WAYF
    </a>
        <div id="langs"></div>
        <a id="deiclogo" href="http://www.deic.dk" title="DeiC homepage" target="_blank">
      DeiC
    </a>
    </div>
    <div id="subheader">
    </div>
    <div id="sectionouter">
        <div id="section">
            <div id=error>
            </div>
            <div id=content>
            hi
            </div>
        </div>
    </div>
    <div style="clear:both;">
    </div>
    <div id="footer">
    </div>
    <!-- div id footer -->
    <br />

</body>
<script>
         function changelang(e) {
             e = e || window.event;
             var target = e.target || e.srcElement
             lang = target.getAttribute("data-lang")
             render(lang, data)
         }

         function unremember(e) {
           e = e || window.event;
           var target = e.target || e.srcElement
           dsardb.rmByKey(target.getAttribute("data-key"));
           render(lang, data)
         }

        function render (lang, data) {
            var templatelangs = '<a data-lang="{{lang}}">{{displaylang}}</a> ';
            var langs = '';

            for (var i = 0; i < data.langs.length; i++) {
                if (lang == data.langs[i][0]) {
                    continue;
                }
                langs += Mustache.render(templatelangs, {
                    lang: data.langs[i][0],
                    displaylang: data.langs[i][1]
                });
            }

            document.getElementById("langs").innerHTML = langs;
            var zzz = ar.ex(lang, Object.assign(data))
            var prevattrs = dsardb.db();

            var content = Mustache.render('<div id=prevattrs class="prevattrs"><p>{{{previous_attribute_releases}}}<p><ul class=rm>{{^val}}{{previous_attribute_releases_none}}{{/val}}{{#val}}<li data-key="{{Key}}">{{{SP.DisplayNames}}} / {{{IdP.DisplayNames}}}{{/val}}</ul></div>', Object.assign(zzz.attributeRelease, {val: ar.ex(lang, prevattrs)}))
            document.getElementById("content").innerHTML = content;

            var nodes = document.getElementById('prevattrs').getElementsByTagName("li");

            for (var i = 0; i < nodes.length; ++i) {
              nodes[i].onclick = unremember;
            }

            nodes = document.getElementById('langs').children
            for (var i = 0; i < nodes.length; ++i) {
              nodes[i].onclick = changelang;
            }
        }
		var lang = (navigator.language || navigator.userLanguage).slice(0, 2);
        render(lang, data);
</script>
</html>
